@page "/"

@inject ICryptoSevice cs

<MudTable Items="@intradayTrades.Take(20)" Hover="true" Breakpoint="Breakpoint.Sm" Loading="@_loading" LoadingProgressColor="Color.Info">
	<HeaderContent>
		<MudTh>Id</MudTh>
		<MudTh>Rank</MudTh>
		<MudTh>Symbol</MudTh>
		<MudTh>Name</MudTh>
		<MudTh>Price $</MudTh>
		<MudTh>Market Cap $</MudTh>
		<MudTh>Change Percent 24Hr %</MudTh>
	</HeaderContent>
	<RowTemplate>
		<MudTd>@context.Id</MudTd>
		<MudTd>@context.Rank</MudTd>
		<MudTd>@context.Symbol</MudTd>
		<MudTd>@context.Name</MudTd>
		<MudTd>@context.PriceUsd?.ToString("N2")</MudTd>
		<MudTd>@context.MarketCapUsd?.ToString("N2")</MudTd>
		<MudTd>@((context.ChangePercent24Hr*100)?.ToString("N2"))%</MudTd>
	</RowTemplate>
</MudTable>

@code {
	private string id = "bitcoin";
	private string interval = "M5";
	private bool _loading = true;
	private TradingHistory? tradingHistory;
	private List<Crypto> intradayTrades = new();

	protected override async Task OnInitializedAsync()
	{
		intradayTrades = await cs.GetAllCryptosAsync() as List<Crypto>;
		_loading = false;
	}
}